# Version Control

## Git Workflow

- Use feature branch strategy
- Meaningful branch names (feature/fix/chore/docs)
- Follow Conventional Commits specification
- Utilize PR templates
- Mandatory code reviews
- Squash commits when merging

## Commit Message Format

### Template Structure

```
<type>: <subject>

<body>

<footer>
```

### Writing Principles

- **Intent focused**: Explain WHY the change was made, not just WHAT changed
- **Context aware**: Include background and purpose of the change
- **Collaboration oriented**: Reflect requirements and problem awareness for team collaboration

### Format Rules

#### Subject Line

- Maximum 50 characters
- Include type prefix (e.g., `feat: add user authentication`)
- Use imperative mood ("add" not "added" or "adds")
- Capitalize first letter after type
- No period at the end

#### Body

- Maximum 72 characters per line
- Explain the motivation for the change
- Focus on why and what, not how
- Use "-" for bullet points
- Separate from subject with blank line

#### Footer

- Reference related issues, PRs, or tickets

### Commit Types

- `feat`: New feature
- `fix`: Bug fix
- `refactor`: Code refactoring (no functional changes)
- `style`: Formatting changes (no code changes)
- `docs`: Documentation updates
- `test`: Add or refactor tests
- `chore`: Build process, dependencies, or tooling changes

### Best Practices

1. **Capitalize** the subject line after type
2. **Use imperative mood** in subject line
3. **No period** at the end of subject line
4. **Blank line** between subject and body
5. **Explain why** in body, not how
6. **Use bullet points** with "-" for multiple items

### AI Code Contribution Tracking

When using Claude Code or other AI tools, track and document code contribution ratios in commit messages.

#### Classification Categories

- **AI Generated**: Code written entirely by AI without manual modification
- **AI Assisted**: Code generated by AI but modified/refined by user
- **User Written**: Code written entirely by user without AI assistance
- **Mixed**: Combination of AI and user contributions in same file/section

#### Contribution Ratio Format

Include contribution breakdown in commit body:

```
Code Contribution:
- AI Generated: XX%
- AI Assisted: XX% 
- User Written: XX%
```

#### Calculation Guidelines

1. **Line-based calculation**: Count modified lines by category
2. **File-based weighting**: Consider complexity and criticality
3. **Functional contribution**: Weight by feature completeness vs. minor edits

**Formula**: `(AI Lines + (AI Assisted Lines Ã— 0.7)) / Total Modified Lines Ã— 100`

#### Attribution Rules

- **>70% AI contribution**: Include AI co-author and tool attribution
- **30-70% mixed**: Include contribution breakdown only
- **<30% AI contribution**: Optional to include breakdown

#### Documentation Requirements

For significant AI contributions (>30%), include:

1. **Tool identification**: Which AI tool was used
2. **Contribution ratio**: Percentage breakdown
3. **Modification summary**: What was changed from AI output
4. **Quality assurance**: Testing and validation performed

### Examples

<example>
feat: add user authentication system

Implement JWT-based authentication to secure API endpoints.
This change was needed because:

- Previous system lacked proper security measures
- Users requested account protection features
- Compliance requirements for data protection

Code Contribution:
- AI Generated: 15%
- AI Assisted: 25%
- User Written: 60%

Fixes #142
</example>

<example>
refactor: simplify database connection logic

Extract connection pooling into separate module to improve
code maintainability and reduce duplication across services.

Code Contribution:
- AI Generated: 80%
- User Written: 20%

AI generated the core connection logic, user added error handling
and configuration management.

Related to INF-24

ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>
</example>

<example>
feat: implement user dashboard with real-time updates

Create comprehensive dashboard showing user activity, notifications,
and system status with WebSocket integration.

Code Contribution:
- AI Generated: 45%
- AI Assisted: 30%
- User Written: 25%

Claude Code generated component structure and WebSocket handlers.
User implemented custom styling, error boundaries, and performance
optimizations.

Closes #89

ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>
</example>
